@model CourseViewModel;
@{
    ViewData["Title"] = "Our Courses";
}

<section id="courses" class="section-container">

    <nav class="navigation">
        <a asp-controller="Home" asp-action="Index">
            <svg class="home" width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M1.7522 15.4999H4.7522H9.2522H12.2522C13.0794 15.4999 13.7522 14.8272 13.7522 13.9999V7.24994C13.7522 7.05119 13.6734 6.85994 13.5324 6.71969L7.53245 0.719693C7.2392 0.426443 6.7652 0.426443 6.47195 0.719693L0.471947 6.71969C0.330947 6.85994 0.252197 7.05119 0.252197 7.24994V13.9999C0.252197 14.8272 0.924947 15.4999 1.7522 15.4999ZM5.5022 13.9999V10.2499H8.5022V13.9999H5.5022ZM1.7522 7.56044L7.0022 2.31044L12.2522 7.56044L12.2529 13.9999H10.0022V10.2499C10.0022 9.42269 9.32945 8.74994 8.5022 8.74994H5.5022C4.67495 8.74994 4.0022 9.42269 4.0022 10.2499V13.9999H1.7522V7.56044Z" fill="#9397AD" />
            </svg>
            home
        </a>
        <p>>></p>
        <p>Courses</p>
    </nav>

    <div class="headlineCourses">
        <h1>Courses</h1>
        <div class="search-container">
            <div class="dropdown">
                <button class="btn-transparent dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                    @ViewData["Category"]
                </button>
                <ul class="dropdown-menu">
                    <li class="li-options">
                        <a asp-controller="Courses" asp-action="Index" class="dropdown-item">All Categories</a>
                    </li>
                    @foreach (var category in Model.Categories)
                    {
                        @* Med asp-route-category skapar du en slut-del på url och en unik query med "categoryId" *@
                        <li class="li-options">
                            <a asp-controller="Courses" asp-action="Index" asp-route-category="@category.Id" class="dropdown-item">@category.CategoryName</a>
                        </li>
                    }
                </ul>
            </div>

            <form asp-controller="Courses" asp-action="Index" method="get" class="search-container">
                <div class="input">
                    <input id="search" name="search" placeholder="Serach courses" />
                    <i class="fa-solid fa-magnifying-glass"></i>
                </div>
                <button type="submit" class="btn-theme">Search</button>
            </form>

        </div>
    </div>

    <div class="course-container">
        @if(Model.Courses != null)
        {
            @foreach (var course in Model.Courses)
            {
                <div class="courses-boxes">
                    <div class="imageContainer">
                        <img class="image" src="@course.ImageUrl" alt="@course.ImageALtText" />

                        @if (@course.IsBestseller == true)
                        {
                            <div class="best-seller-container">
                                <div class="best-seller"><label asp-for="@course.IsBestseller">Best Seller</label></div>
                            </div>
                            
                        }

                        <a asp-controller="Courses" asp-action="MyCourses" asp-route-id="@course.Id" class="bookmark">
                            <div class="bookmarkchild">
                                <svg width="12" height="16" viewBox="0 0 12 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M10.5 0.5H1.5C0.67275 0.5 0 1.17275 0 2V5.957V6.5V15.5L6 12.071L12 15.5V6.5V5.957V2C12 1.17275 11.3273 0.5 10.5 0.5ZM10.5 12.9147L6 10.3438L1.5 12.9147V6.5V5.957V2H10.5V5.957V6.5V12.9147Z" fill="#33354D" />
                                </svg>
                            </div>
                        </a>
                    </div>
                    <div class="text-container">
                        <a class="a-title" asp-controller="CourseDetails" asp-action="Index" asp-route-courseId="@course.Id"><h5>@course.Title</h5></a>
                        <p>By @course.Author</p>
                        <div class="price-container">
                            <h6 class="@(course.DiscountPrice != null ? "red" : "price")">$@course.Price</h6>

                            @if (course.DiscountPrice != null)
                            {
                                <p class="discount-price">
                                    $@course.DiscountPrice
                                </p>
                            }

                        </div>
                        <hr class="hr" />
                        <div class="timeAndLikesParent">
                            <div class="timeAndLikesChild">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M9.99996 1.66675C5.40496 1.66675 1.66663 5.40508 1.66663 10.0001C1.66663 14.5951 5.40496 18.3334 9.99996 18.3334C14.595 18.3334 18.3333 14.5951 18.3333 10.0001C18.3333 5.40508 14.595 1.66675 9.99996 1.66675ZM9.99996 16.6667C6.32413 16.6667 3.33329 13.6759 3.33329 10.0001C3.33329 6.32425 6.32413 3.33341 9.99996 3.33341C13.6758 3.33341 16.6666 6.32425 16.6666 10.0001C16.6666 13.6759 13.6758 16.6667 9.99996 16.6667Z" fill="#9397AD" />
                                    <path d="M10.8333 5.83325H9.16663V10.3449L11.9108 13.0891L13.0891 11.9108L10.8333 9.65492V5.83325Z" fill="#9397AD" />
                                </svg>
                                <p>@course.Hours</p>
                            </div>
                            <div class="timeAndLikesChild">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M16.6666 6.66675H11.99L12.9258 3.86091C13.0941 3.35425 13.0091 2.79258 12.6966 2.35925C12.3841 1.92591 11.8775 1.66675 11.3433 1.66675H9.99996C9.75246 1.66675 9.51829 1.77675 9.35913 1.96675L5.44246 6.66675H3.33329C2.41413 6.66675 1.66663 7.41425 1.66663 8.33341V15.8334C1.66663 16.7526 2.41413 17.5001 3.33329 17.5001H5.83329H14.4225C15.1133 17.5001 15.74 17.0659 15.9833 16.4184L18.2808 10.2926C18.3158 10.1992 18.3333 10.1001 18.3333 10.0001V8.33341C18.3333 7.41425 17.5858 6.66675 16.6666 6.66675ZM3.33329 8.33341H4.99996V15.8334H3.33329V8.33341ZM16.6666 9.84925L14.4225 15.8334H6.66663V7.80175L10.39 3.33341H11.345L10.0433 7.23591C9.95746 7.49008 10.0008 7.76925 10.1575 7.98675C10.3141 8.20508 10.5658 8.33341 10.8333 8.33341H16.6666V9.84925Z" fill="#9397AD" />
                                </svg>
                                <p>@course.LikesInProcent %  (@course.LikesInNumbers K)</p>
                            </div>
                        </div>
                    </div>
                </div>
            }
        }

        <span id="noCoursesFound" class="error">@TempData["ErrorMessage"]</span>

    </div>

    <!-- Pagination -->
    <div class="pagination-container">
        <nav aria-label="Page navigation example">
            <ul class="pagination">
                <li class="page-item @Model.CurrentPage == 1 ? " disabled" : "" ">
                    <a class="page-link" href="/courses?pageNumber=@(Model.CurrentPage - 1)" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                @for (int i = 1; i <= Model.TotalPages; i++)
                {
                    <li class="page-item @(Model.CurrentPage == i ? "active" : "")">
                        <a class="page-link" href="/courses?pageNumber=@i">@i</a>
                    </li>
                }
                <li class="page-item @(Model.CurrentPage == Model.TotalPages ? "disabled" : "")">
                    <a class="page-link" href="/courses?pageNumber=@(Model.CurrentPage + 1)" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>


</section>

<section class="section-container" id="end">
    <div class="text-container">
        <h7>Ready to get started?</h7>
        <div class="headline">
            <h1>Take Your <span class="blue-text">Skills</span> to the Next Level</h1>
        </div>
        <button class="btn-theme-s">Work with us</button>
    </div>
    <div class="image-container">
        <img class="image" src="/images/coursesPage/group.svg" />
    </div>
</section>
